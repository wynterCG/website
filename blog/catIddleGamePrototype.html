<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Iddle Cat — Pre-Combat Foundation & Battle Slice (UE5) — Daniel Inverno</title>
  <meta name="description" content="A clear, visual walkthrough of the Cat Iddle project: core systems, the new turn-based battle slice, good practices, and what’s next." />

  <!-- Canonical (adjust if needed) -->
  <link rel="canonical" href="https://daninverno.com/blog/catIddleGamePrototype.html" />

  <!-- Feed discovery -->
  <link rel="alternate" type="application/feed+json" href="../feed.json" />

  <!-- Open Graph -->
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Iddle Cat — Pre-Combat Foundation & Battle Slice (UE5)" />
  <meta property="og:description" content="What exists, what the battle slice adds, good practices, and how the systems connect." />
  <meta property="og:url" content="https://daninverno.com/blog/catIddleGamePrototype.html" />
  <meta property="og:image" content="https://daninverno.com/blog/cat_game/thumbnail.png" />
  <meta property="og:site_name" content="Daniel Inverno — Dev Blog" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Iddle Cat — Pre-Combat Foundation & Battle Slice (UE5)" />
  <meta name="twitter:description" content="A clear, visual walkthrough of the Cat Iddle project and the new battle slice." />
  <meta name="twitter:image" content="https://daninverno.com/blog/cat_game/thumbnail.png" />

  <!-- JSON-LD Article schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Iddle Cat — Pre-Combat Foundation & Battle Slice (UE5)",
    "description": "What exists, what the battle slice adds, good practices, and how the systems connect.",
    "author": { "@type": "Person", "name": "Daniel Inverno", "url": "https://daninverno.com/" },
    "datePublished": "2025-08-05T10:00:00Z",
    "dateModified": "2025-09-04T10:00:00Z",
    "image": ["https://daninverno.com/blog/cat_game/thumbnail.png"],
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://daninverno.com/blog/catIddleGamePrototype.html" },
    "publisher": { "@type": "Person", "name": "Daniel Inverno" }
  }
  </script>

  <style>
    /* ---- modern, self-contained dark theme ---- */
    :root{
      --bg1:#07090e; --bg2:#0d1322; --bg3:#0e172a;
      --card:#0b1220; --paper:#0f1422;
      --text:#e5e7eb; --muted:#9aa3b2; --border:rgba(255,255,255,.12);
      --accent:#a78bfa; --accent2:#60a5fa;
      --maxw:72rem; --rad:22px; --shadow:0 10px 30px rgba(0,0,0,.35);
      --ok:#34d399; --warn:#fbbf24;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      color:var(--text);
      background:
        radial-gradient(1200px 500px at 20% -10%, rgba(96,165,250,.18), transparent 55%),
        radial-gradient(900px 500px at 80% -20%, rgba(167,139,250,.16), transparent 55%),
        linear-gradient(to bottom, var(--bg1), var(--bg2) 35%, var(--bg3));
      font:16px/1.7 system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:var(--maxw);margin:0 auto;padding:0 1rem}

    header{position:sticky;top:0;z-index:50;background:rgba(7,9,14,.7);backdrop-filter:saturate(120%) blur(8px);border-bottom:1px solid var(--border)}
    .nav{height:64px;display:flex;align-items:center;justify-content:space-between}
    .links{display:none;gap:1.1rem;color:#cbd5e1}
    @media(min-width:768px){.links{display:flex}}

    .progress{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--accent),var(--accent2));width:0%;z-index:60}

    main{padding:2.25rem 0 3.25rem}
    .heroWrap{position:relative}
    .hero{width:100%;height:360px;object-fit:cover;border-radius:18px;border:1px solid var(--border);box-shadow:var(--shadow)}
    .heroBadge{position:absolute;left:16px;bottom:14px;background:rgba(6,10,20,.6);backdrop-filter:blur(6px);border:1px solid var(--border);border-radius:999px;padding:.25rem .65rem;font-size:.78rem;color:#dbeafe}

    h1{font-size:clamp(2rem,4vw,2.9rem);line-height:1.1;margin:1.3rem 0 .65rem}
    .meta{color:var(--muted);font-size:.92rem;margin-bottom:1rem}

    .tags{display:flex;flex-wrap:wrap;gap:.5rem;margin:.85rem 0 1.35rem}
    .tag{border:1px solid var(--border);border-radius:999px;padding:.2rem .7rem;font-size:.75rem;color:#d1d5db;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.0))}

    article{display:grid;gap:1.25rem;grid-template-columns:1fr;align-items:start}
    @media(min-width:1024px){article{grid-template-columns:260px 1fr;gap:1.75rem}}

    /* TOC */
    .toc{position:sticky;top:88px;align-self:start;background:var(--card);border:1px solid var(--border);border-radius:var(--rad);padding:1rem}
    .toc h3{margin:.2rem 0 .5rem;font-size:1rem;color:#cbd5e1}
    .toc a{display:block;padding:.35rem .4rem;border-radius:10px;color:#aab4c6}
    .toc a:hover{background:rgba(255,255,255,.05);color:#fff}

    /* Content */
    .content{background:var(--card);border:1px solid var(--border);border-radius:var(--rad);padding:1.25rem}
    @media(min-width:768px){.content{padding:2rem}}
    .content h2{margin:1.25rem 0 .5rem;font-size:1.35rem}
    .content h3{margin:1rem 0 .35rem;font-size:1.05rem;color:#dbeafe}
    .content p{margin:.6rem 0}
    .lead{color:#dbeafe}

    .callout{border:1px solid var(--border);background:var(--paper);border-radius:16px;padding:1rem;margin:.85rem 0}
    .callout.good{border-color:rgba(52,211,153,.28)}
    .callout.warn{border-color:rgba(251,191,36,.28)}

    .checklist{display:grid;grid-template-columns:1fr;gap:.5rem}
    @media(min-width:768px){.checklist{grid-template-columns:repeat(2,1fr)}}
    .card{border:1px solid var(--border);background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.0));border-radius:14px;padding:.85rem}

    .divider{height:1px;background:linear-gradient(90deg,transparent,var(--border),transparent);margin:1.5rem 0}

    /* Video grid/cards — now ALWAYS single column and bigger */
    .videoGrid{display:grid;gap:1.25rem;grid-template-columns:1fr}
    /* keep single column even on large screens */
    @media(min-width:768px){.videoGrid{grid-template-columns:1fr}}
    @media(min-width:1200px){.videoGrid{grid-template-columns:1fr}}

    .videoCard{border:1px solid var(--border);border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0));padding:.9rem}
    .videoCard .media{width:100%;height:auto;aspect-ratio:16/9;border-radius:10px;border:1px solid var(--border);display:block;background:#000}
    .videoCard .thumb{width:100%;aspect-ratio:16/9;object-fit:cover;border-radius:10px;border:1px solid var(--border);display:block}
    .videoCard figcaption{color:var(--muted);font-size:.95rem;margin-top:.6rem}

    /* Lightweight YouTube placeholder */
    .ytLite{position:relative;display:block;width:100%;aspect-ratio:16/9;border-radius:10px;border:1px solid var(--border);overflow:hidden;background:#000;padding:0}
    .ytLite .play{position:absolute;inset:auto auto 10px 10px;background:rgba(255,255,255,.9);color:#000;border-radius:999px;font-weight:700;font-size:.95rem;line-height:1;padding:.55rem .8rem}
    .ytLite:focus-visible{outline:2px solid var(--accent);outline-offset:2px}

    footer{border-top:1px solid var(--border);padding:2rem 0;color:#9ca3af}
  </style>
</head>
<body>
  <div class="progress" id="progress"></div>
  <header>
    <div class="container nav">
      <a href="../" aria-label="Home">Daniel Inverno</a>
      <nav class="links" aria-label="Primary">
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="heroWrap">
      <img class="hero" src="./cat_game/thumbnail.png" alt="Iddle Cat—battle slice preview" />
      <span class="heroBadge">UE5 • Prototype</span>
    </div>

    <h1>Cat iddle game prototype</h1>
    <div class="meta">Updated Sept 4, 2025 • ~10 min read</div>

    <div class="tags">
      <span class="tag">UE5</span>
      <span class="tag">Blueprints</span>
      <span class="tag">Systems Design</span>
      <span class="tag">Cat Game</span>
    </div>

    <article>
      <!-- Table of contents -->
      <aside class="toc" aria-label="On this page">
        <h3>On this page</h3>
        <a href="#overview">Overview</a>
        <a href="#foundation">Pre-Battle Foundation</a>
        <a href="#battle">The Battle Slice</a>
        <a href="#practices">Good Practices & Optimization</a>
        <a href="#dev-videos">Dev Progression (Videos)</a>
        <a href="#player-exp">Player Experience </a>
        <a href="#changelog">Changelog</a>
      </aside>

      <!-- Main content -->
      <section class="content">
        <p class="lead" id="overview">
          A clean, modular idle → battle pipeline. This post shows what existed, what the battle slice adds,
          and why the pieces click together without drama.
        </p>

        <div class="callout good">
          <strong>TL;DR:</strong> Single-player, data-driven, with a battle screen that swaps in,
          runs a tidy turn loop, awards XP, and hands control back to the idle layer.
        </div>

        <h2 id="foundation">Pre-Battle Foundation</h2>
        <p>
          Before combat, the project already had a solid backbone: a central controller managing UI and input; a
          modular trio for economy (Purr), progression (Leveling), and attributes (Stats); and a resource loop
          (Purr Power) pacing bigger moments. UI was dynamic and performance-friendly, with dual live previews
          and packaged-build fixes in place.
        </p>
        <div class="checklist">
          <div class="card"><strong>Economy (“Purr”)</strong><br>Active & passive gain, growth curves, and upgrade hooks.</div>
          <div class="card"><strong>Leveling</strong><br>XP → Levels → Points, with clean thresholds and pacing.</div>
          <div class="card"><strong>Stats & Attributes</strong><br>Long-term values feeding derived combat numbers; player point spend.</div>
          <div class="card"><strong>Purr Power</strong><br>Session-bound resource for impactful moments; reset per encounter.</div>
          <div class="card"><strong>UI & Previews</strong><br>Dynamic lists, two live scene captures, throttled for performance.</div>
        </div>

        <div class="divider"></div>

        <h2 id="battle">The Battle Slice</h2>
        <p>
          The slice mounts cleanly on top of that foundation. Encounters start from the main UI, freeze current
          stats into a per-fight snapshot, alternate turns with readable logs, and award XP on victory.
        </p>
        <div class="checklist">
          <div class="card"><strong>Flow</strong><br>Start → Player turn ↔ Enemy turn → Auto-battle.</div>
          <div class="card"><strong>Enemy data</strong><br>Defined in a table for fast authoring (ID, name, HP, ATK, XP).</div>
          <div class="card"><strong>Snapshot</strong><br>Freeze stats at fight start so mid-fight tweaks don’t drift numbers.</div>
          <div class="card"><strong>Combat feel</strong><br>Hit/crit/dodge basics, simple mitigation, fair flee checks.</div>
          <div class="card"><strong>UI</strong><br>Two HP bars, Attack/Flee, scroll log; buttons enable only on your turn.</div>
          <div class="card"><strong>Events</strong><br>Combat broadcasts; UI listens. No tight coupling.</div>
        </div>

        <div class="divider"></div>

        <h2 id="practices">Good Practices & Optimization</h2>
        <p>
          Habits that keep it fast, legible, and easy to extend.
        </p>

        <h3>Data-first, then visuals</h3>
        <p>
          Enemies, upgrades, and long-term stats live in data assets/tables. Balance work and content additions
          don’t require touching gameplay graphs. Visuals read from data and react to events.
        </p>

        <h3>Modularity & separation</h3>
        <p>
          Each concern sits in its own module: economy, leveling, stats, and combat. UI doesn’t know how numbers are produced;
          it just displays what it’s told. Safer changes, easier testing.
        </p>

        <h3>Blueprint Interfaces (contracts, not references)</h3>
        <p>
          UI talks to gameplay via interface messages (“start fight”, “attack”, “flee”). No hard references, no circular deps,
          tidier input handling, easy swapping of controller/character shells.
        </p>

        <h3>Event Dispatchers (one-way, payloaded)</h3>
        <p>
          Gameplay emits simple, one-way events: state changes, HP updates, and log lines. Listeners receive the values they need
          and update in place. Widgets stay lightweight; no polling.
        </p>

        <div class="callout good">
          <strong>Naming tip:</strong> Use “OnThingChanged(Value…)” for dispatchers and keep them focused. If the data itself is the point of the event (HP, State, Log),
          include it in the payload; if it’s just a ping, keep it param-less.
        </div>

        <h3>RNG you can trust (and replay)</h3>
        <p>
          A single Random Stream is seeded once per session. All chances (hit, crit, flee) draw from it.
          For debugging, switch to a fixed seed to reproduce the exact sequence.
        </p>
        <ul class="checklist">
          <li class="card"><strong>Session seed:</strong> random at startup for fresh play; fixed in debug for repeatability.</li>
          <li class="card"><strong>From-Stream rolls:</strong> use the “from Stream” random nodes so the sequence advances consistently.</li>
          <li class="card"><strong>Auditability:</strong> log the seed + first few rolls when debugging “impossible” streaks.</li>
        </ul>

        <div class="divider"></div>

        <h2 id="dev-videos">Dev Progression (Videos)</h2>
        <p>Short clips showing the project coming together—from idle foundation to the turn-based slice.</p>

        <div class="videoGrid">
          <!-- Option A — Self-hosted MP4/WebM -->
          <figure class="videoCard">
            <video class="media" controls preload="metadata"
                   poster="/blog/cat_game/devlog00.png">
              <source src="/blog/cat_game/devlog00.mp4" type="video/mp4" />
              <source src="./videos/idle_foundation.webm" type="video/webm" />
              <!-- <track src="./videos/idle_foundation_captions.vtt" kind="captions" srclang="en" label="English"> -->
              Sorry, your browser can’t play this video.
            </video>
            <figcaption>
              <strong>Cat iddle game</strong> — Main resource system.
            </figcaption>
          </figure>
        
          <div class="videoGrid">
          <!-- Option A — Self-hosted MP4/WebM -->
          <figure class="videoCard">
            <video class="media" controls preload="metadata"
                   poster="/blog/cat_game/devlog01.png">
              <source src="/blog/cat_game/devlog01.mp4" type="video/mp4" />
              <source src="./videos/idle_foundation.webm" type="video/webm" />
              <!-- <track src="./videos/idle_foundation_captions.vtt" kind="captions" srclang="en" label="English"> -->
              Sorry, your browser can’t play this video.
            </video>
            <figcaption>
              <strong>Cat iddle game</strong> — Main resource system iteration 01.
            </figcaption>
          </figure>

          <div class="videoGrid">
          <!-- Option A — Self-hosted MP4/WebM -->
          <figure class="videoCard">
            <video class="media" controls preload="metadata"
                   poster="/blog/cat_game/devlog02.png">
              <source src="/blog/cat_game/devlog02.mp4" type="video/mp4" />
              <source src="./videos/idle_foundation.webm" type="video/webm" />
              <!-- <track src="./videos/idle_foundation_captions.vtt" kind="captions" srclang="en" label="English"> -->
              Sorry, your browser can’t play this video.
            </video>
            <figcaption>
              <strong>Cat iddle game</strong> — Main resource system iteration 01.
            </figcaption>
          </figure>

        <div class="divider"></div>

        <h2 id="player-exp">Player Experience</h2>
        <p>
          Early upgrades nudge reliability and pace (accuracy, survivability, resource gain). Randomness is seeded
          once per session for stable testing while still feeling fresh.
        </p>
        <div class="checklist">
          <div class="card"><strong>Feel</strong><br>Crits and spends create peaks; base loop stays legible.</div>
          <div class="card"><strong>Balance</strong><br>Simple knobs (HP, ATK, chances, resource flow) for first-hour tuning.</div>
          <div class="card"><strong>UX</strong><br>Concise logs, minimal UI, clear turn state.</div>
        </div>
        <div class="divider"></div>

        <h2 id="changelog">Changelog</h2>
        <ul>
          <li><strong>Sept 4, 2025:</strong> Added “Good Practices & Optimization” and “Dev Progression (Videos)” sections.</li>
          <li><strong>Aug 20, 2025:</strong> Post fully refreshed; added battle slice details, snapshot model, and clearer flow. New design & meta.</li>
          <li><strong>Aug 5, 2025:</strong> Initial prototype notes (idle foundation, previews, and planned combat).</li>
        </ul>

        <a class="btn" href="../">← Back to blog</a>
      </section>
    </article>
  </main>

  <footer>
    <div class="container">
      © <span id="y"></span> Daniel Inverno. All rights reserved.
    </div>
  </footer>

  <script>
    // progress bar
    const prog = document.getElementById('progress');
    const onScroll = () => {
      const h = document.documentElement;
      const scrolled = (h.scrollTop) / (h.scrollHeight - h.clientHeight);
      prog.style.width = (scrolled * 100).toFixed(2) + '%';
    };
    document.addEventListener('scroll', onScroll, {passive:true});
    onScroll();

    // footer year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Lazy YouTube: replace button with iframe on click (privacy-enhanced domain)
    document.querySelectorAll('.ytLite').forEach(el => {
      el.addEventListener('click', () => {
        const id = el.dataset.ytid;
        const iframe = document.createElement('iframe');
        iframe.setAttribute('allowfullscreen', '');
        iframe.setAttribute('title', 'YouTube video player');
        iframe.setAttribute('loading', 'lazy');
        iframe.setAttribute('referrerpolicy', 'strict-origin-when-cross-origin');
        iframe.src = 'https://www.youtube-nocookie.com/embed/' + id + '?autoplay=1&hl=en';
        iframe.style.width = '100%';
        iframe.style.height = '100%';
        iframe.style.border = '0';
        const wrapper = document.createElement('div');
        wrapper.style.width = '100%';
        wrapper.style.aspectRatio = '16 / 9';
        wrapper.style.borderRadius = '10px';
        wrapper.style.overflow = 'hidden';
        wrapper.style.border = '1px solid var(--border)';
        wrapper.appendChild(iframe);
        el.replaceWith(wrapper);
      }, { once: true });
    });
  </script>
</body>
</html>
